# 动态代理
> 是一种机制，允许程序在运行时创建代理对象

## 1.问题

1. 动态代理是在运行时生成的代理对象，那代理对象对应的class文件在哪里，是怎么加载到jvm中的？
> 
> 动态代理生成的代理类是在内存中生成的，不会生成对应的class文件。在运行时，当需要使用代理对象时，JVM会通过类加载器将代理类加载到内存中。具体来说，JVM会先检查代理类是否已经被加载过，如果没有，则会使用类加载器加载代理类，并将其转换为字节码，然后通过字节码生成代理类的Class对象，并将其存储在内存中。如果代理类已经被加载过，则直接使用已经加载的代理类。最终，JVM会将代理类的Class对象传递给代理对象的构造函数，从而创建代理对象。

2. 哪些项目中使用了动态代理？
> 
> a) spring AOP
> b) mybatis 通过mapper接口生成代理类，执行sql
> c) JUnit单元测试
> d) RPC远程过程调用，用动态工厂，根据接口生成代理类，根据代理类中的注解信息，匹配注册中心的服务，进行远程过程调用

3. 动态代理的优缺点
> 
> 
> 动态代理的优点：
> 
> 1. 灵活性：动态代理可以在运行时动态地创建代理对象，而不需要在编译时就确定代理对象的类型，因此具有很高的灵活性。
> 
> 2. 可扩展性：动态代理可以通过实现InvocationHandler接口来扩展代理的行为，从而实现更加复杂的代理逻辑。
> 
> 3. 代码复用：动态代理可以将代理逻辑抽象出来，从而可以在多个类中复用。
> 
> 4. 降低耦合性：动态代理可以将代理对象与被代理对象解耦，从而降低系统的耦合性。
> 
> 动态代理的缺点：
> 
> 1. 性能问题：由于动态代理是在运行时动态生成代理对象，因此会带来一定的性能损失。
> 
> 2. 限制：动态代理只能代理实现了接口的类，无法代理没有实现接口的类。
> 
> 3. 调试困难：由于动态代理是在运行时动态生成代理对象，因此在调试时可能会比较困难。

4. JDK动态代理和CGLIB动态代理有什么区别？
> 
> JDK动态代理和CGLIB动态代理都是Java中常用的动态代理技术，它们的主要区别在于实现方式和适用范围。
> 
> JDK动态代理是基于接口的代理技术，它通过反射机制在运行时动态地创建代理类，代理类实现了被代理接口中的所有方法，并将方法调用转发给被代理对象。JDK动态代理适用于代理接口的情况，可以在运行时动态地创建代理对象，但是无法代理没有实现接口的类。
> 
> CGLIB动态代理是基于继承的代理技术，它通过生成被代理类的子类来实现代理，代理类继承了被代理类的所有方法，并重写了其中需要代理的方法。CGLIB动态代理适用于代理没有实现接口的类，可以在运行时动态地创建代理对象，但是无法代理final类和final方法。
> 
> 总的来说，JDK动态代理适用于代理接口的情况，CGLIB动态代理适用于代理没有实现接口的类。在实际应用中，可以根据具体情况选择使用哪种动态代理技术。